<div class="notification-dropdown">
    <div class="notification-header">
        <h3>Notifications</h3>
        <button class="clear-btn" (click)="markAllAsRead()" *ngIf="notifications().length > 0">Mark all read</button>
    </div>

    <div class="notification-list" *ngIf="notifications().length > 0; else noNotifications">
        <div class="notification-item" *ngFor="let notification of notifications()" [class.unread]="!notification.read"
            (click)="markAsRead(notification._id, $event)">
            <div class="notification-icon" [ngClass]="notification.severity.toLowerCase()">
                <span class="material-icons" *ngIf="notification.severity === 'INFO'">info</span>
                <span class="material-icons" *ngIf="notification.severity === 'WARNING'">warning</span>
                <span class="material-icons" *ngIf="notification.severity === 'CRITICAL'">error</span>
            </div>
            <div class="notification-content">
                <div class="notification-message">
                    {{ notification.message }}
                    <span class="time">{{ notification.createdAt | date:'shortTime' }}</span>
                </div>
            </div>
            <div class="notification-status" *ngIf="!notification.read">
                <span class="dot"></span>
            </div>
        </div>
    </div>

    <ng-template #noNotifications>
        <div class="empty-state">
            <span class="material-icons">notifications_off</span>
            <p>No new notifications</p>
        </div>
    </ng-template>

    <div class="notification-footer" *ngIf="notifications.length > 0">
        <a routerLink="/notifications">View all notifications</a>
    </div>
</div>